(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{288:function(e,t,a){e.exports=a(513)},297:function(e,t,a){},299:function(e,t,a){},513:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),o=a(70),l=a.n(o),r=a(21),i=(a(297),a(299),a(301),a(34)),s=a(29),m=a(30),u=a(32),p=a(31),d=a(33),h=a(35),f=a(530),g=a(533),E=a(535),b=a(529),C=a(514),v=a(525),y=a(161),O=a(526),j=a(534),S=a(523),N=a(172),w=(a(358),{apiKey:"AIzaSyBeQcQlfQA5OpY_IZ1Mpi9qTZFiNDw86wY",authDomain:"phone-book-63384.firebaseapp.com",databaseURL:"https://phone-book-63384.firebaseio.com",projectId:"phone-book-63384",storageBucket:"phone-book-63384.appspot.com",messagingSenderId:"870252849132"});N.initializeApp(w);var k=N.database().ref(),_=N.storage(),U=k.child("contacts"),I=function(e){return function(t){t({type:"SELECT_CONTACT",payload:e})}},T=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,c=new Array(n),o=0;o<n;o++)c[o]=arguments[o];return(a=Object(u.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(c)))).searchContacts=function(e){var t=a.props,n=t.contacts,c=t.searchContacts,o=e.target.value.toLowerCase();c(n.filter(function(e){if(""===o)return!0;var t=-1!==e[1].fullname.toLowerCase().indexOf(o),a=-1!==e[1].phone.toLowerCase().indexOf(o),n=-1!==e[1].email.toLowerCase().indexOf(o),c=-1!==e[1].company.toLowerCase().indexOf(o);return t||a||n||c}))},a}return Object(d.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return c.a.createElement("div",{className:"search_block"},c.a.createElement(S.a,{fluid:!0,icon:"search",placeholder:"Search contact",onChange:this.searchContacts.bind(this)}))}}]),t}(n.Component),L=Object(r.b)(function(e){return{contacts:e.contacts.contactList}},{searchContacts:function(e){return function(t){t({type:"SEARCH_CONTACTS",payload:e})}}})(T),x=a(163);function A(e){return this.setState(Object(x.a)({},e.target.name,e.target.value))}function z(e,t){var a=this;if(!e)return!1;_.ref("images/".concat(e.name)).put(e).on("state_changed",function(e){var t=Math.round(e.bytesTransferred/e.totalBytes*100);a.setState({progress:t})},function(e){console.log(e)},function(){_.ref("images").child(e.name).getDownloadURL().then(function(e){a.setState({photoUrl:e})})})}var D=function(e){return void 0===e||null===e||"object"===typeof e&&0===Object.keys(e).length||"string"===typeof e&&0===e.trim().length},R=function(e){var t={};return e.fullname=D(e.fullname)?"":e.fullname,e.phone=D(e.phone)?"":e.phone,e.email=D(e.email)?"":e.email,e.company=D(e.company)?"":e.company,e.photoUrl=D(e.photoUrl)?"":e.photoUrl,e.fullname.match(/^[a-z\u0430-\u044f ,.'-]+$/i)||(t.fullname="Name is not valid"),e.fullname.length<2&&(t.fullname="between 2 and 60 symbols"),e.phone.match(/^[+]*[(]{0,1}[0-9]{1,3}[)]{0,1}[-\s\.\/0-9]*$/g)||(t.phone='only: numbers, "+", "(/)"'),e.phone.length<10&&(t.phone="between 10 and 13 symbols"),e.email.match(/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/)||(t.email="email is not valid"),e.company.match(/^[a-z\u0430-\u044f0-9():*#@\u2116!?=+ ,.'-]+$/i)||(t.email="company name is not valid"),e.company.length<2&&(t.company="between 2 and 60 symbols"),{errors:t,validate:D(t)}},B=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(u.a)(this,Object(p.a)(t).call(this,e))).resetState=function(){a.setState(Object(i.a)({},a.initialState))},a.open=function(){return a.setState({open:!0})},a.close=function(){return a.resetState()},a.handleImageChange=function(e){if(e.target.files[0]){var t=e.target.files[0];a.setState({image:t})}},a.saveContact=function(e){e.preventDefault();var t=a.state,n=t.fullname,c=t.phone,o=t.email,l=t.company,r=t.photoUrl,i=a.props.addContact,s={fullname:n,phone:c,email:o,company:l,photoUrl:r},m=R(s),u=m.errors;if(!m.validate)return a.setState({errors:u}),!1;i(s),a.resetState()},a.initialState={fullname:"",phone:"",email:"",company:"",photoUrl:"",image:null,open:!1,progress:0,errors:{}},a.state=Object(i.a)({},a.initialState),a.handleImageChange=a.handleImageChange.bind(Object(h.a)(Object(h.a)(a))),a.saveContact=a.saveContact.bind(Object(h.a)(Object(h.a)(a))),a}return Object(d.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this.state,t=e.fullname,a=e.phone,n=e.email,o=e.company,l=e.photoUrl,r=e.open,i=e.progress,s=e.errors,m=e.image;return c.a.createElement("div",{className:"sidebar__head"},c.a.createElement(L,null),c.a.createElement(f.a,{size:"tiny",open:r,onOpen:this.open,onClose:this.close,trigger:c.a.createElement(g.a,{title:"Add contact",icon:"user plus"}),closeIcon:!0},c.a.createElement(E.a,{content:"Create new contact"}),c.a.createElement(f.a.Content,null,c.a.createElement(b.a,{onSubmit:this.saveContact},c.a.createElement("div",{className:"image__container"},c.a.createElement(C.a,{centered:!0,src:l||"https://react.semantic-ui.com/images/wireframe/image.png",size:"small",rounded:!0}),c.a.createElement(v.a,{size:"tiny",className:"".concat(0===i?"progress-hidden":null," progress-bar"),percent:i,success:!0}),c.a.createElement("input",{className:"file-input",type:"file",accept:"image/*",onChange:this.handleImageChange}),c.a.createElement(g.a,{onClick:z.bind(this,m,i),color:"orange"},c.a.createElement(y.a,{name:"upload"})," upload"),s.photoUrl?c.a.createElement("div",{className:"input-errors"},s.photoUrl):null),c.a.createElement(O.a,null),c.a.createElement(j.a,{padded:!0},c.a.createElement(j.a.Row,null,c.a.createElement("input",{icon:"user",placeholder:"Fullname",name:"fullname",value:t,onChange:A.bind(this),maxLength:"60",required:!0}),s.fullname?c.a.createElement("div",{className:"input-errors"},s.fullname):null),c.a.createElement(j.a.Row,null,c.a.createElement("input",{type:"text",icon:"phone",placeholder:"Phone number",name:"phone",value:a,onChange:A.bind(this),maxLength:"13",required:!0}),s.phone?c.a.createElement("div",{className:"input-errors"},s.phone):null),c.a.createElement(j.a.Row,null,c.a.createElement("input",{type:"email",icon:"mail",placeholder:"Email",name:"email",value:n,onChange:A.bind(this),required:!0}),s.email?c.a.createElement("div",{className:"input-errors"},s.email):null),c.a.createElement(j.a.Row,null,c.a.createElement("input",{icon:"briefcase",placeholder:"Company",name:"company",value:o,onChange:A.bind(this),maxLength:"60",required:!0}),s.company?c.a.createElement("div",{className:"input-errors"},s.company):null)),c.a.createElement(f.a.Actions,null,c.a.createElement(g.a,{color:"red",onClick:this.close},c.a.createElement(y.a,{name:"remove"})," Close"),c.a.createElement(g.a,{type:"submit",color:"green"},c.a.createElement(y.a,{name:"checkmark"})," Save"))))))}}]),t}(n.Component),P=Object(r.b)(null,{addContact:function(e){return function(t){U.push().set(e)}}})(B),q=a(527),F=a(532),$=Object(r.b)(null,{selectContact:I})(function(e){var t=e.obj[1];return c.a.createElement(F.a.Item,{onClick:function(){return e.selectContact(e.obj)}},c.a.createElement(C.a,{avatar:!0,src:t.photoUrl||"https://react.semantic-ui.com/images/wireframe/image.png"}),c.a.createElement(F.a.Content,null,c.a.createElement(F.a.Header,null,t.fullname),t.phone))}),M=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,c=new Array(n),o=0;o<n;o++)c[o]=arguments[o];return(a=Object(u.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(c)))).state={contacts:[],loader:!0},a.componentDidUpdate=function(e,t){a.props.contacts!==e.contacts&&a.setState({contacts:a.props.contacts,loader:!1})},a}return Object(d.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){this.props.getContacts()}},{key:"componentWillReceiveProps",value:function(e){this.setState({contacts:e.foundContacts})}},{key:"render",value:function(){var e=this.state,t=e.contacts,a=e.loader;return c.a.createElement("div",{className:"contact__list"},a?c.a.createElement(q.a,{active:!0,inline:"centered"}):c.a.createElement(F.a,{selection:!0},t.map(function(e,t){return c.a.createElement($,{key:t,obj:e})})))}}]),t}(n.Component),Z=Object(r.b)(function(e){return{contacts:e.contacts.contactList,foundContacts:e.contacts.foundContacts}},{getContacts:function(){return function(e){U.on("value",function(t){e({type:"GET_CONTACTS",payload:t.val()?Object.entries(t.val()):[]})})}}})(M),G=function(){return c.a.createElement("div",{className:"sidebar"},c.a.createElement(P,null),c.a.createElement(Z,null))},H=a(531),Q=a(528),W=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(u.a)(this,Object(p.a)(t).call(this,e))).resetState=function(){a.setState(Object(i.a)({},a.initialState))},a.resetStateToProps=function(){var e=a.props.contactInfo,t=e.fullname,n=e.phone,c=e.email,o=e.company,l=e.photoUrl;e.edit;a.setState({fullname:t,phone:n,email:c,company:o,photoUrl:l,edit:!1,errors:{}})},a.open=function(){return a.setState({open:!0})},a.close=function(){return a.setState({open:!1})},a.editClick=function(){a.setState({edit:!0})},a.handleImageChange=function(e){if(e.target.files[0]){var t=e.target.files[0];a.setState({image:t})}},a.removeContact=function(){var e=a.props,t=e.deleteContact,n=e.selectContact;t(e.contactId),n(null),a.setState({open:!1})},a.handleUpdateContact=function(e){e.preventDefault();var t=a.state,n=t.fullname,c=t.phone,o=t.email,l=t.company,r=t.photoUrl,i=a.props,s=i.updateContact,m=i.contactId,u={fullname:n,phone:c,email:o,company:l,photoUrl:r},p=R(u),d=p.errors;if(!p.validate)return a.setState({errors:d}),!1;s(u,m),a.setState({edit:!1,errors:{}})},a.handleCancelUpdate=function(){a.resetStateToProps()},a.componentDidMount=function(){a.resetStateToProps()},a.initialState={fullname:"",phone:"",email:"",company:"",photoUrl:"",image:null,progress:0,open:!1,edit:!1,errors:{}},a.state=Object(i.a)({},a.initialState),a.handleImageChange=a.handleImageChange.bind(Object(h.a)(Object(h.a)(a))),a}return Object(d.a)(t,e),Object(m.a)(t,[{key:"componentDidUpdate",value:function(e){e.contactInfo!==this.props.contactInfo&&this.resetStateToProps()}},{key:"render",value:function(){var e=this,t=this.state,a=t.open,n=t.edit,o=t.fullname,l=t.phone,r=t.email,i=t.company,s=t.image,m=t.progress,u=t.photoUrl,p=t.errors,d=this.props.contactId;return c.a.createElement(c.a.Fragment,null,c.a.createElement(H.a.Group,{relaxed:!0},c.a.createElement(H.a,null,c.a.createElement("div",{className:"image__container"},c.a.createElement(H.a.Image,{src:u||"https://react.semantic-ui.com/images/wireframe/image.png",size:"small",rounded:!0}),n?c.a.createElement(c.a.Fragment,null,c.a.createElement("input",{className:"file-input",type:"file",accept:"image/*",onChange:this.handleImageChange}),c.a.createElement(g.a,{onClick:z.bind(this,s,m),color:"orange"},c.a.createElement(y.a,{name:"upload"})," upload")):null),c.a.createElement(H.a.Content,null,c.a.createElement("form",{onSubmit:function(t){return e.handleUpdateContact(t)}},c.a.createElement(H.a.Extra,null,c.a.createElement(y.a,{name:"user"}),c.a.createElement("input",{className:"item__input",name:"fullname",value:o,onChange:A.bind(this),disabled:!n,maxLength:"60"}),p.fullname?c.a.createElement("div",{className:"input-errors"},p.fullname):null),c.a.createElement(H.a.Extra,null,c.a.createElement(y.a,{name:"phone"}),c.a.createElement("input",{className:"item__input",name:"phone",value:l,onChange:A.bind(this),disabled:!n,maxLength:"13"}),p.phone?c.a.createElement("div",{className:"input-errors"},p.phone):null),c.a.createElement(O.a,null),c.a.createElement(H.a.Extra,null,c.a.createElement(y.a,{name:"mail"}),c.a.createElement("input",{className:"item__input",type:"email",name:"email",value:r,onChange:A.bind(this),disabled:!n}),p.email?c.a.createElement("div",{className:"input-errors"},p.email):null),c.a.createElement(H.a.Extra,null,c.a.createElement(y.a,{name:"briefcase"}),c.a.createElement("input",{className:"item__input",name:"company",value:i,onChange:A.bind(this),disabled:!n,maxLength:"60"}),p.company?c.a.createElement("div",{className:"input-errors"},p.company):null),n?c.a.createElement(c.a.Fragment,null,c.a.createElement(g.a,{type:"submit",color:"green",title:"Save",icon:"save",floated:"right"}),c.a.createElement(g.a,{color:"orange",title:"Cancel",icon:"delete",floated:"right",onClick:this.handleCancelUpdate})):null)))),c.a.createElement(H.a.Extra,null,c.a.createElement(g.a,{floated:"right",icon:"trash alternate outline",color:"red",title:"Delete",onClick:this.open}),c.a.createElement(Q.a,{size:"mini",open:a,onCancel:this.close,onConfirm:function(){return e.removeContact(d)}}),c.a.createElement(g.a,{color:"yellow",title:"Edit",icon:"edit",floated:"right",onClick:this.editClick})))}}]),t}(n.Component),J=Object(r.b)(function(e){return{contacts:e.contacts.contactList,contactInfo:e.contacts.selectedContact[1],contactId:e.contacts.selectedContact[0]}},{deleteContact:function(e){return function(t){U.child(e).remove()}},selectContact:I,updateContact:function(e,t){return function(a){U.child(t).update({fullname:e.fullname,phone:e.phone,email:e.email,company:e.company,photoUrl:e.photoUrl})}}})(W),Y=function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return this.props.contact?c.a.createElement("div",{className:"main__content--item"},c.a.createElement(J,null)):c.a.createElement("div",{className:"detail-placeholder"},"Select a contact")}}]),t}(n.Component),K=Object(r.b)(function(e){return{contact:e.contacts.selectedContact}})(Y),V=function(){document.getElementsByClassName("main__content")[0].classList.toggle("toggle-content")},X=function(){return c.a.createElement("div",{className:"burger-menu",onClick:V},c.a.createElement("div",{className:"burger-menu-container"},c.a.createElement("div",{className:"burger-menu--line"}),c.a.createElement("div",{className:"burger-menu--line"}),c.a.createElement("div",{className:"burger-menu--line"})))},ee=function(){return c.a.createElement("div",{className:"main__content"},c.a.createElement(X,null),c.a.createElement(K,null))},te=function(){return c.a.createElement("div",{className:"wrapper"},c.a.createElement(G,null),c.a.createElement(ee,null))},ae=function(e){return c.a.createElement("div",{className:"App"},c.a.createElement(te,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var ne=a(47),ce=a(278),oe={contactList:[],selectedContact:null,foundContacts:[]},le=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:oe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_CONTACTS":return Object(i.a)({},e,{contactList:t.payload});case"SELECT_CONTACT":return Object(i.a)({},e,{selectedContact:t.payload});case"SEARCH_CONTACTS":return Object(i.a)({},e,{foundContacts:t.payload});default:return e}},re=Object(ne.c)({contacts:le}),ie=Object(ne.e)(re,{},Object(ne.d)(Object(ne.a)(ce.a)));l.a.render(c.a.createElement(r.a,{store:ie},c.a.createElement(ae,null)),document.getElementById("root")),ie.subscribe(function(){return ie.getState()}),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[288,2,1]]]);
//# sourceMappingURL=main.961ace1f.chunk.js.map